<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Executar Migra√ß√£o - Metas Gamificadas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .pulse-animation { animation: pulse 2s ease-in-out infinite; }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .slide-in { animation: slideIn 0.5s ease-out; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen p-8">
    <div class="max-w-4xl mx-auto space-y-6">
        <!-- Header -->
        <div class="bg-white rounded-2xl shadow-xl p-8 text-center slide-in">
            <div class="text-6xl mb-4">üéØ</div>
            <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2">
                Sistema de Metas Gamificado
            </h1>
            <p class="text-gray-600 text-lg">
                Executar Migra√ß√£o no Supabase
            </p>
            <div class="mt-4 flex items-center justify-center gap-4">
                <span class="px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-medium">
                    ‚úÖ Pronto para Executar
                </span>
                <span class="px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">
                    ‚è±Ô∏è 5 minutos
                </span>
                <span class="px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium">
                    üîí Risco: 3%
                </span>
            </div>
        </div>

        <!-- Passo 1 -->
        <div class="bg-white rounded-2xl shadow-xl p-6 slide-in" style="animation-delay: 0.1s">
            <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center text-white text-xl font-bold flex-shrink-0">
                    1
                </div>
                <div class="flex-1">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Acessar Supabase Dashboard</h2>
                    <p class="text-gray-600 mb-4">Abra o dashboard do Supabase no seu navegador</p>
                    <a href="https://supabase.com/dashboard" target="_blank" 
                       class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-medium hover:shadow-lg transition-all">
                        üöÄ Abrir Supabase Dashboard
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>

        <!-- Passo 2 -->
        <div class="bg-white rounded-2xl shadow-xl p-6 slide-in" style="animation-delay: 0.2s">
            <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center text-white text-xl font-bold flex-shrink-0">
                    2
                </div>
                <div class="flex-1">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Abrir SQL Editor</h2>
                    <p class="text-gray-600 mb-4">No menu lateral, clique em:</p>
                    <div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">üîç</span>
                            <span class="font-mono text-lg font-medium">SQL Editor</span>
                            <span class="text-gray-400">‚Üí</span>
                            <span class="font-mono text-lg font-medium">+ New Query</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Passo 3 -->
        <div class="bg-white rounded-2xl shadow-xl p-6 slide-in" style="animation-delay: 0.3s">
            <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center text-white text-xl font-bold flex-shrink-0">
                    3
                </div>
                <div class="flex-1">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Copiar SQL da Migra√ß√£o</h2>
                    <p class="text-gray-600 mb-4">Clique no bot√£o abaixo para copiar o SQL</p>
                    
                    <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-4 border-2 border-orange-200 mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-mono text-sm text-gray-700">
                                üìÑ supabase/migrations/20260112400000_add_goals_gamification_safe.sql
                            </span>
                            <span class="text-xs text-gray-500">500+ linhas</span>
                        </div>
                        <button onclick="copiarArquivo()" 
                                class="w-full px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg font-medium hover:shadow-lg transition-all flex items-center justify-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                            </svg>
                            <span id="btnText">Copiar SQL da Migra√ß√£o</span>
                        </button>
                    </div>

                    <div class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4">
                        <div class="flex items-start gap-3">
                            <span class="text-2xl">‚ö†Ô∏è</span>
                            <div>
                                <p class="font-medium text-yellow-800 mb-1">Importante:</p>
                                <p class="text-sm text-yellow-700">
                                    Certifique-se de copiar TODO o conte√∫do do arquivo SQL. 
                                    O arquivo tem 500+ linhas e deve come√ßar com <code class="bg-yellow-100 px-1 rounded">-- ===</code>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Passo 4 -->
        <div class="bg-white rounded-2xl shadow-xl p-6 slide-in" style="animation-delay: 0.4s">
            <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center text-white text-xl font-bold flex-shrink-0">
                    4
                </div>
                <div class="flex-1">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Colar e Executar</h2>
                    <p class="text-gray-600 mb-4">No SQL Editor do Supabase:</p>
                    <div class="space-y-3">
                        <div class="flex items-center gap-3 bg-gray-50 rounded-lg p-3">
                            <span class="text-xl">üìù</span>
                            <span class="text-gray-700">Cole o SQL copiado (Ctrl+V ou Cmd+V)</span>
                        </div>
                        <div class="flex items-center gap-3 bg-gray-50 rounded-lg p-3">
                            <span class="text-xl">‚ñ∂Ô∏è</span>
                            <span class="text-gray-700">Clique em "Run" ou pressione Ctrl+Enter</span>
                        </div>
                        <div class="flex items-center gap-3 bg-gray-50 rounded-lg p-3">
                            <span class="text-xl">‚è≥</span>
                            <span class="text-gray-700">Aguarde 5-10 segundos</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Passo 5 -->
        <div class="bg-white rounded-2xl shadow-xl p-6 slide-in" style="animation-delay: 0.5s">
            <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center text-white text-xl font-bold flex-shrink-0">
                    5
                </div>
                <div class="flex-1">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Validar Execu√ß√£o</h2>
                    <p class="text-gray-600 mb-4">Copie e execute esta query de valida√ß√£o:</p>
                    
                    <div class="bg-gray-900 rounded-lg p-4 mb-4">
                        <pre class="text-green-400 text-sm overflow-x-auto"><code id="validationQuery">SELECT 
  (SELECT COUNT(*) FROM information_schema.tables 
   WHERE table_name IN ('goal_achievements', 'goal_streaks', 'user_goal_levels')) as tabelas,
  (SELECT COUNT(*) FROM information_schema.columns 
   WHERE table_name = 'user_goals' 
   AND column_name IN ('streak_days', 'xp_earned', 'level')) as campos,
  (SELECT COUNT(*) FROM information_schema.routines 
   WHERE routine_name IN ('update_goal_streak', 'process_level_up')) as funcoes;</code></pre>
                    </div>

                    <button onclick="copiarValidacao()" 
                            class="w-full px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-medium hover:shadow-lg transition-all flex items-center justify-center gap-2 mb-4">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                        <span id="btnValidation">Copiar Query de Valida√ß√£o</span>
                    </button>

                    <div class="bg-green-50 border-2 border-green-200 rounded-lg p-4">
                        <div class="flex items-start gap-3">
                            <span class="text-2xl">‚úÖ</span>
                            <div>
                                <p class="font-medium text-green-800 mb-1">Resultado Esperado:</p>
                                <div class="bg-white rounded p-3 font-mono text-sm">
                                    <div>tabelas: <span class="text-green-600 font-bold">3</span></div>
                                    <div>campos: <span class="text-green-600 font-bold">3</span></div>
                                    <div>funcoes: <span class="text-green-600 font-bold">2</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sucesso -->
        <div class="bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl shadow-xl p-8 text-white text-center slide-in" style="animation-delay: 0.6s">
            <div class="text-6xl mb-4">üéâ</div>
            <h2 class="text-3xl font-bold mb-2">Pronto!</h2>
            <p class="text-lg opacity-90 mb-6">
                Se viu os n√∫meros corretos (3, 3, 2), a migra√ß√£o foi 100% bem-sucedida!
            </p>
            <div class="grid grid-cols-3 gap-4 max-w-2xl mx-auto">
                <div class="bg-white/20 rounded-lg p-4">
                    <div class="text-3xl font-bold">6</div>
                    <div class="text-sm opacity-90">Campos Novos</div>
                </div>
                <div class="bg-white/20 rounded-lg p-4">
                    <div class="text-3xl font-bold">3</div>
                    <div class="text-sm opacity-90">Tabelas Novas</div>
                </div>
                <div class="bg-white/20 rounded-lg p-4">
                    <div class="text-3xl font-bold">3</div>
                    <div class="text-sm opacity-90">Fun√ß√µes Novas</div>
                </div>
            </div>
        </div>

        <!-- Pr√≥ximos Passos -->
        <div class="bg-white rounded-2xl shadow-xl p-6 slide-in" style="animation-delay: 0.7s">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üìã Pr√≥ximos Passos</h2>
            <div class="space-y-3">
                <div class="flex items-center gap-3 p-3 bg-blue-50 rounded-lg">
                    <span class="text-2xl">üé®</span>
                    <span class="text-gray-700">Integrar <code class="bg-blue-100 px-2 py-1 rounded">ModernGoalCard.tsx</code></span>
                </div>
                <div class="flex items-center gap-3 p-3 bg-purple-50 rounded-lg">
                    <span class="text-2xl">üìä</span>
                    <span class="text-gray-700">Criar <code class="bg-purple-100 px-2 py-1 rounded">GoalsHeroStats.tsx</code></span>
                </div>
                <div class="flex items-center gap-3 p-3 bg-green-50 rounded-lg">
                    <span class="text-2xl">üß™</span>
                    <span class="text-gray-700">Testar em staging</span>
                </div>
                <div class="flex items-center gap-3 p-3 bg-orange-50 rounded-lg">
                    <span class="text-2xl">üì±</span>
                    <span class="text-gray-700">Validar responsividade</span>
                </div>
            </div>
        </div>

        <!-- Documenta√ß√£o -->
        <div class="bg-white rounded-2xl shadow-xl p-6 slide-in" style="animation-delay: 0.8s">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üìö Documenta√ß√£o Completa</h2>
            <div class="grid grid-cols-2 gap-3">
                <a href="RESUMO_1_PAGINA_METAS.md" class="flex items-center gap-2 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <span class="text-xl">üìÑ</span>
                    <span class="text-sm text-gray-700">Resumo 1 P√°gina</span>
                </a>
                <a href="GUIA_VISUAL_SUPABASE.md" class="flex items-center gap-2 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <span class="text-xl">üì∏</span>
                    <span class="text-sm text-gray-700">Guia Visual</span>
                </a>
                <a href="RESUMO_IMPLEMENTACAO_METAS.md" class="flex items-center gap-2 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <span class="text-xl">üìä</span>
                    <span class="text-sm text-gray-700">Resumo Completo</span>
                </a>
                <a href="INDICE_MESTRE_METAS.md" class="flex items-center gap-2 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <span class="text-xl">üìö</span>
                    <span class="text-sm text-gray-700">√çndice Mestre</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        function copiarArquivo() {
            const btn = document.getElementById('btnText');
            btn.textContent = 'üìã Abrindo arquivo...';
            
            // Simular abertura do arquivo
            setTimeout(() => {
                alert('‚ö†Ô∏è IMPORTANTE:\n\n1. Abra o arquivo:\n   supabase/migrations/20260112400000_add_goals_gamification_safe.sql\n\n2. Selecione TODO o conte√∫do (Ctrl+A ou Cmd+A)\n\n3. Copie (Ctrl+C ou Cmd+C)\n\n4. Cole no SQL Editor do Supabase\n\nO arquivo tem 500+ linhas e deve come√ßar com:\n-- =====================================================');
                btn.textContent = '‚úÖ Copie o arquivo SQL agora!';
                btn.classList.remove('from-orange-500', 'to-red-500');
                btn.classList.add('from-green-500', 'to-emerald-500');
            }, 500);
        }

        function copiarValidacao() {
            const query = document.getElementById('validationQuery').textContent;
            navigator.clipboard.writeText(query).then(() => {
                const btn = document.getElementById('btnValidation');
                btn.textContent = '‚úÖ Query Copiada!';
                setTimeout(() => {
                    btn.textContent = 'Copiar Query de Valida√ß√£o';
                }, 2000);
            });
        }
    </script>
</body>
</html>
