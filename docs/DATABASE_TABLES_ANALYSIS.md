================================================================================
ğŸ“Š ANÃLISE DE TABELAS DO BANCO DE DADOS - MaxNutrition
================================================================================

## ğŸ“ˆ RESUMO GERAL
- Total de tabelas: 192
- Categorias identificadas: 29
- Problemas potenciais: 20

## ğŸ“ TABELAS POR CATEGORIA

### ğŸ¥ Dados de SaÃºde (22 tabelas)
  - advanced_daily_tracking
  - health_diary
  - health_feed_direct_messages
  - health_feed_follows
  - health_feed_notifications
  - health_feed_posts
  - health_feed_reactions
  - health_feed_stories
  - health_feed_story_views
  - health_integrations
  - heart_rate_data
  - pregnancy_nutrition
  - preventive_health_analyses
  - saude_especifica
  - specific_health
  - user_anamnesis
  - user_anamnesis_history
  - user_physical_data
  - water_tracking
  - weighings
  - weight_measurements
  - weight_measures

### ğŸ¥— NutriÃ§Ã£o - Planos & RefeiÃ§Ãµes (14 tabelas)
  - meal_feedback
  - meal_plan_history
  - meal_plan_items
  - meal_plans
  - meal_suggestions
  - nutrition_tracking
  - nutritional_goals
  - nutritional_protocols
  - nutritional_recommendations
  - recipe_components
  - recipe_items
  - recipe_templates
  - recipes
  - therapeutic_recipes

### ğŸ NutriÃ§Ã£o - Alimentos (13 tabelas)
  - alimentos_completos
  - food_history
  - institute_nutritional_catalog
  - nutrition_foods
  - nutritional_aliases
  - nutritional_food_patterns
  - nutritional_yields
  - pending_nutritional_aliases
  - taco_foods
  - user_favorite_foods
  - user_food_preferences
  - user_ingredient_history
  - valores_nutricionais_completos

### ğŸ† GamificaÃ§Ã£o - Conquistas & Pontos (10 tabelas)
  - points_configuration
  - powerup_usage_log
  - seasonal_events
  - user_achievements
  - user_achievements_v2
  - user_gamification
  - user_leagues
  - user_points
  - user_powerups
  - xp_config_audit_log

### ğŸ§  IA - ConfiguraÃ§Ãµes & Cache (10 tabelas)
  - ai_configurations
  - ai_response_cache
  - ai_system_logs
  - ai_usage_logs
  - analysis_cache
  - image_cache
  - scheduled_analysis_records
  - users_needing_analysis
  - weekly_analyses
  - weekly_insights

### ğŸ“² WhatsApp (10 tabelas)
  - whatsapp_evolution_logs
  - whatsapp_message_logs
  - whatsapp_message_queue
  - whatsapp_message_templates
  - whatsapp_pending_medical
  - whatsapp_pending_nutrition
  - whatsapp_provider_config
  - whatsapp_rate_limit_tracking
  - whatsapp_scheduled_messages
  - whatsapp_webhook_responses

### âš½ Esportes (9 tabelas)
  - sport_training_plans
  - sport_workout_logs
  - sports_achievements
  - sports_challenge_participations
  - sports_challenges
  - sports_training_plans
  - sports_training_records
  - user_sport_modalities
  - user_sports_modalities

### ğŸ® GamificaÃ§Ã£o - Desafios (9 tabelas)
  - challenge_participations
  - challenge_team_members
  - challenge_teams
  - challenges
  - flash_challenges
  - team_battles
  - team_challenge_contributions
  - team_challenges
  - user_challenges

### ğŸ‹ï¸ ExercÃ­cios (8 tabelas)
  - exercise_challenges
  - exercise_tracking
  - exercises_library
  - user_exercise_feedback
  - user_exercise_history
  - user_exercise_programs
  - user_workout_evolution
  - workout_plans

### ğŸ¯ Metas & Progresso (8 tabelas)
  - goal_streaks
  - goal_updates
  - user_goal_invites
  - user_goal_levels
  - user_goal_participants
  - user_goals
  - user_progress
  - weekly_goal_progress

### ğŸ¤– Sofia (IA Nutricional) (8 tabelas)
  - base_de_conhecimento_sofia
  - sofia_comprehensive_analyses
  - sofia_conversation_context
  - sofia_food_analysis
  - sofia_knowledge_base
  - sofia_learning
  - sofia_memory
  - sofia_messages

### ğŸ’³ Pagamentos & Assinaturas (7 tabelas)
  - offers
  - payment_records
  - subscribers
  - subscription_invoices
  - subscription_plans
  - user_purchases
  - user_subscriptions

### ğŸ©º MÃ©dico & Exames (6 tabelas)
  - medical_documents
  - medical_exam_analyses
  - medical_pdf_reports
  - premium_medical_reports
  - premium_report_events
  - public_report_links

### ğŸ’Š Suplementos (6 tabelas)
  - protocol_supplements
  - sugestÃµes_nutracÃªuticas_do_usuÃ¡rio
  - supplement_protocols
  - supplements
  - user_nutraceutical_suggestions
  - user_supplements

### ğŸ§˜ SessÃµes & AvaliaÃ§Ãµes (6 tabelas)
  - daily_responses
  - professional_evaluations
  - session_templates
  - sessions
  - user_assessments
  - user_sessions

### ğŸ”” NotificaÃ§Ãµes (6 tabelas)
  - notification_preferences
  - notification_queue_unified
  - notifications
  - notificaÃ§Ãµes_enviadas
  - sent_notifications
  - smart_notifications

### ğŸ‘¤ UsuÃ¡rios & Perfis (5 tabelas)
  - profiles
  - user_blocks
  - user_layout_preferences
  - user_notification_settings
  - user_roles

### ğŸ¢ Empresa & ConfiguraÃ§Ãµes (5 tabelas)
  - company_configurations
  - company_data
  - company_knowledge_base
  - dashboard_settings
  - layout_config

### ğŸ“‹ MissÃµes (4 tabelas)
  - daily_mission_sessions
  - missions
  - missÃµes_diÃ¡rias
  - user_missions

### ğŸ“š Cursos & LiÃ§Ãµes (4 tabelas)
  - course_modules
  - courses
  - lessons
  - liÃ§Ãµes

### ğŸ­ Sabotadores (4 tabelas)
  - saboteur_assessments
  - saboteur_responses
  - saboteur_results
  - user_custom_saboteurs

### ğŸ”— Webhooks & APIs (4 tabelas)
  - rate_limits
  - vps_api_logs
  - webhook_destinations
  - webhook_queue

### ğŸ‘¥ Comunidade & Feed (3 tabelas)
  - reaÃ§Ãµes_feed_de_saÃºde
  - social_context_tracking
  - team_chat_messages

### ğŸ’¬ Chat & Conversas (2 tabelas)
  - chat_conversation_history
  - chat_conversations

### ğŸ“± Google Fit (2 tabelas)
  - google_fit_data
  - google_fit_tokens

### âš™ï¸ Admin & Logs (2 tabelas)
  - admin_logs
  - system_metrics

### ğŸ“Š Tracking & Produtividade (2 tabelas)
  - productivity_tracking
  - wheel_of_life

### ğŸ“ Feedback & Leads (2 tabelas)
  - information_feedback
  - received_leads

### â“ NÃ£o Categorizadas (1 tabelas)
  - user_medical_reports

## âš ï¸ PROBLEMAS POTENCIAIS

### DuplicaÃ§Ã£o PT/EN
  - health_feed_reactions
  - lessons
  - liÃ§Ãµes
  - missions
  - missÃµes_diÃ¡rias
  - notificaÃ§Ãµes_enviadas
  - reaÃ§Ãµes_feed_de_saÃºde
  - sent_notifications
  - user_missions

### VersÃ£o antiga vs nova
  - user_achievements
  - user_achievements_v2

### Nomes muito similares
  - weight_measurements
  - weight_measures

### Funcionalidade similar
  - weighings
  - weight_measurements
  - weight_measures

### Singular vs Plural
  - sport_training_plans
  - sports_training_plans
  - user_sport_modalities
  - user_sports_modalities

## ğŸ·ï¸ PREFIXOS MAIS COMUNS

  - user_*: 37 tabelas
  - whatsapp_*: 10 tabelas
  - health_*: 9 tabelas
  - sofia_*: 7 tabelas
  - nutritional_*: 6 tabelas
  - meal_*: 5 tabelas
  - sports_*: 5 tabelas
  - ai_*: 4 tabelas
  - team_*: 4 tabelas
  - challenge_*: 3 tabelas
  - company_*: 3 tabelas
  - medical_*: 3 tabelas
  - recipe_*: 3 tabelas
  - saboteur_*: 3 tabelas
  - weekly_*: 3 tabelas
  - chat_*: 2 tabelas
  - daily_*: 2 tabelas
  - exercise_*: 2 tabelas
  - goal_*: 2 tabelas
  - google_*: 2 tabelas

## ğŸ’¡ RECOMENDAÃ‡Ã•ES DE ORGANIZAÃ‡ÃƒO

### 1. Consolidar Tabelas Duplicadas
   - Migrar `liÃ§Ãµes` â†’ `lessons`
   - Migrar `missÃµes_diÃ¡rias` â†’ `missions` ou `daily_missions`
   - Migrar `notificaÃ§Ãµes_enviadas` â†’ `sent_notifications`
   - Consolidar `weight_measurements` e `weight_measures`
   - Migrar `user_achievements` â†’ `user_achievements_v2`

### 2. Padronizar Nomenclatura
   - Usar apenas inglÃªs para nomes de tabelas
   - Padronizar singular/plural (preferir plural)
   - Usar prefixo `user_` para dados de usuÃ¡rio

### 3. Agrupar por DomÃ­nio (Schemas)
   - `nutrition.*` - Todas tabelas de nutriÃ§Ã£o
   - `exercise.*` - ExercÃ­cios e esportes
   - `gamification.*` - Desafios, pontos, conquistas
   - `social.*` - Feed, chat, comunidade
   - `ai.*` - Sofia e configuraÃ§Ãµes de IA
   - `integrations.*` - WhatsApp, Google Fit, webhooks

### 4. Tabelas Candidatas a Arquivamento
   - Tabelas `_v1` ou sem `_v2` quando existe versÃ£o nova
   - Tabelas de cache antigas
   - Logs antigos (manter apenas Ãºltimos 90 dias)

## ğŸ”§ COMANDO PARA LOVABLE

Para obter detalhes de cada tabela, execute no Lovable:
```sql
-- Ver estrutura de uma tabela especÃ­fica
SELECT column_name, data_type, is_nullable
FROM information_schema.columns
WHERE table_name = 'NOME_DA_TABELA'
ORDER BY ordinal_position;

-- Contar registros em todas as tabelas
SELECT schemaname, relname, n_live_tup
FROM pg_stat_user_tables
ORDER BY n_live_tup DESC;
```
