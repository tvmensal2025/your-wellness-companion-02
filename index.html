<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>MaxNutrition - Nutrição Inteligente</title>
    <meta name="description" content="Nutrição inteligente e personalizada para transformar sua saúde">
    <meta name="author" content="MaxNutrition" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="shortcut icon" type="image/png" href="/favicon.png">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#10b981">
    <meta name="apple-mobile-web-app-title" content="MaxNutrition">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Apple Touch Icons - MaxNutrition Logo -->
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon.png">
    
    <!-- Google Fonts - Otimizado com preload -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"></noscript>
    
    <!-- Preload Supabase connection -->
    <link rel="preconnect" href="https://ciszqtlaacrhfwsqnvjr.supabase.co">
    <link rel="dns-prefetch" href="https://ciszqtlaacrhfwsqnvjr.supabase.co">

    
    
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://app.oficialmaxnutrition.com.br" />
    <meta property="og:title" content="MaxNutrition - Nutrição Inteligente" />
    <meta property="og:description" content="Nutrição inteligente e personalizada para transformar sua saúde" />
    <meta property="og:image" content="https://app.oficialmaxnutrition.com.br/images/maxnutrition-og.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="MaxNutrition - Nutrição Inteligente" />
    <meta name="twitter:description" content="Nutrição inteligente e personalizada para transformar sua saúde" />
    <meta name="twitter:image" content="https://app.oficialmaxnutrition.com.br/images/maxnutrition-og.jpg" />
    
    <!-- Polyfill para compatibilidade com navegadores antigos -->
    <script>
      // Polyfill para globalThis (Safari < 12.1, IE)
      if (typeof globalThis === 'undefined') {
        (function() {
          if (typeof self !== 'undefined') { self.globalThis = self; }
          else if (typeof window !== 'undefined') { window.globalThis = window; }
          else if (typeof global !== 'undefined') { global.globalThis = global; }
          else { this.globalThis = this; }
        })();
      }
    </script>
</head>

  <body>
    <div id="root">
      <!-- Loader inicial CSS puro - aparece ANTES do React carregar -->
      <div id="initial-loader" style="
        position: fixed;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        z-index: 9999;
      ">
        <!-- Folha animada com CSS puro -->
        <div style="position: relative; width: 80px; height: 80px;">
          <!-- Círculo externo girando -->
          <div style="
            position: absolute;
            inset: 0;
            border: 3px solid rgba(34, 197, 94, 0.2);
            border-top-color: #22c55e;
            border-radius: 50%;
            animation: spin 1s linear infinite;
          "></div>
          <!-- Folha central -->
          <svg style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 32px;
            height: 32px;
            color: #22c55e;
            animation: pulse 2s ease-in-out infinite;
          " viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/>
            <path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/>
          </svg>
        </div>
        <!-- Texto -->
        <p style="
          margin-top: 24px;
          color: #94a3b8;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          font-size: 14px;
          animation: fadeInOut 2s ease-in-out infinite;
        ">Carregando MaxNutrition...</p>
        <!-- Barra de progresso -->
        <div style="
          margin-top: 16px;
          width: 120px;
          height: 3px;
          background: rgba(34, 197, 94, 0.2);
          border-radius: 4px;
          overflow: hidden;
        ">
          <div style="
            width: 40%;
            height: 100%;
            background: linear-gradient(90deg, #22c55e, #10b981);
            border-radius: 4px;
            animation: progress 1.5s ease-in-out infinite;
          "></div>
        </div>
      </div>
      <style>
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.1); } }
        @keyframes fadeInOut { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
        @keyframes progress { 0% { transform: translateX(-100%); } 100% { transform: translateX(350%); } }
      </style>
    </div>
    
    <!-- Service Worker handled by vite-plugin-pwa - DO NOT add manual registration here -->
    
    <!-- Bloquear conexões Firebase indesejadas -->
    <script>
      // Bloquear tentativas de conexão com Firebase
      if (window.XMLHttpRequest) {
        const originalOpen = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = function(method, url, ...args) {
          if (typeof url === 'string' && url.includes('firebaseio.com')) {
            console.warn('Bloqueada tentativa de conexão Firebase:', url);
            return;
          }
          return originalOpen.call(this, method, url, ...args);
        };
      }
      
      // Bloquear fetch para Firebase
      if (window.fetch) {
        const originalFetch = window.fetch;
        window.fetch = function(url, ...args) {
          if (typeof url === 'string' && url.includes('firebaseio.com')) {
            console.warn('Bloqueada tentativa de fetch Firebase:', url);
            return Promise.reject(new Error('Firebase bloqueado'));
          }
          return originalFetch.call(this, url, ...args);
        };
      }
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
