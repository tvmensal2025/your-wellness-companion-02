# üìã LISTA COMPLETA DE CHAMADAS DE IA - Instituto dos Sonhos

---

## ü•ó NUTRI√á√ÉO (Sofia)

| Edge Function | Modelo | Para que serve |
|--------------|--------|----------------|
| `sofia-image-analysis` | `gemini-2.5-flash` / `gemini-1.5-pro` | Analisar foto de refei√ß√£o e identificar alimentos, calcular calorias |
| `sofia-enhanced-memory` | `gemini-3-flash-preview` | Chat com Sofia com mem√≥ria de conversas anteriores |
| `sofia-text-analysis` | `gemini-2.5-flash-lite` | Analisar descri√ß√£o textual de comida ("comi arroz com frango") |
| `sofia-deterministic` | **SEM IA** | C√°lculos nutricionais determin√≠sticos (tabela TACO) |
| `food-analysis` | `gemini-2.5-flash` | An√°lise completa de refei√ß√£o com insights da Sofia |
| `enrich-food-data` | `gemini-2.5-flash` | Enriquecer dados nutricionais de alimentos detectados |
| `enrich-sofia-analysis` | `gemini-2.5-flash` | Aprofundar an√°lise nutricional com contexto do usu√°rio |
| `nutrition-ai-insights` | `gpt-4o` | Gerar insights semanais sobre padr√µes alimentares |
| `nutrition-planner` | `gemini-2.5-flash` | Criar plano alimentar personalizado |
| `generate-meal-plan-taco` | **SEM IA** | Gerar card√°pio baseado em tabela TACO (determin√≠stico) |
| `nutrition-calc` | **SEM IA** | C√°lculos nutricionais puros |
| `nutrition-calc-deterministic` | **SEM IA** | C√°lculos determin√≠sticos de macros |
| `nutrition-daily-summary` | **SEM IA** | Resumo di√°rio de nutri√ß√£o (agrega√ß√£o de dados) |
| `confirm-food-analysis` | **SEM IA** | Confirmar an√°lise de alimento pelo usu√°rio |

---

## ü©∫ M√âDICO (Dr. Vital)

| Edge Function | Modelo | Para que serve |
|--------------|--------|----------------|
| `analyze-medical-exam` | `gemini-2.5-pro` | Analisar foto de exame laboratorial (hemograma, glicemia, etc) |
| `dr-vital-chat` | `gemini-2.5-pro` | Chat m√©dico com Dr. Vital para tirar d√∫vidas de sa√∫de |
| `dr-vital-enhanced` | `gemini-2.5-flash` | Chat m√©dico avan√ßado com contexto expandido do paciente |
| `dr-vital-weekly-report` | `gemini-2.5-flash` | Gerar relat√≥rio semanal de sa√∫de do paciente |
| `generate-medical-report` | `gemini-2.5-pro` | Criar relat√≥rio m√©dico completo em HTML |
| `premium-medical-report` | `gemini-2.5-pro` | Relat√≥rio m√©dico premium com an√°lise aprofundada |
| `finalize-medical-document` | `gemini-2.5-flash` | Finalizar e formatar documento m√©dico |
| `detect-image-type` | `gemini-2.5-flash` | Detectar se imagem √© exame m√©dico ou comida |

---

## üí¨ CHAT UNIFICADO

| Edge Function | Modelo | Para que serve |
|--------------|--------|----------------|
| `unified-ai-assistant` | `gemini-2.5-flash` | Chat unificado que alterna entre Sofia e Dr. Vital automaticamente |
| `enhanced-gpt-chat` | `gpt-4o` | Chat GPT avan√ßado para conversas complexas |
| `interpret-user-intent` | `gemini-2.5-flash` | Detectar inten√ß√£o do usu√°rio (quer falar de comida? sa√∫de? exerc√≠cio?) |

---

## üì± WHATSAPP

| Edge Function | Modelo | Para que serve |
|--------------|--------|----------------|
| `whatsapp-ai-assistant` | `gpt-5-mini` | Assistente principal do WhatsApp (entende √°udio transcrito) |
| `whatsapp-daily-motivation` | `gemini-1.5-pro` | Enviar mensagem motivacional di√°ria personalizada |
| `whatsapp-weekly-report` | `gemini-2.5-flash` | Enviar relat√≥rio semanal via WhatsApp |
| `whatsapp-habits-analysis` | `gemini-2.5-flash` | Analisar h√°bitos do usu√°rio e dar feedback |
| `whatsapp-saboteur-result` | `gemini-2.5-flash` | Enviar resultado do teste de sabotadores |
| `whatsapp-nutrition-check` | `gemini-2.5-flash` | Verificar e comentar sobre nutri√ß√£o do dia |
| `whatsapp-nutrition-webhook` | `gemini-2.5-flash` | Processar webhook de nutri√ß√£o |
| `whatsapp-medical-handler` | `gemini-2.5-flash` | Processar fotos de exames via WhatsApp |
| `whatsapp-celebration` | `gemini-2.5-flash` | Celebrar conquistas do usu√°rio |
| `whatsapp-goal-reminders` | `gemini-2.5-flash` | Lembrar usu√°rio sobre suas metas |
| `whatsapp-smart-reminders` | `gemini-2.5-flash` | Lembretes inteligentes baseados em contexto |
| `whatsapp-welcome` | `gemini-2.5-flash` | Mensagem de boas-vindas personalizada |
| `whatsapp-mission-complete` | `gemini-2.5-flash` | Parabenizar por completar miss√£o do dia |
| `whatsapp-generate-template` | `gemini-1.5-pro` | Gerar templates de mensagem |

---

## üèãÔ∏è EXERC√çCIOS

| Edge Function | Modelo | Para que serve |
|--------------|--------|----------------|
| `generate-ai-workout` | `gemini-2.5-flash` | Gerar programa de treino personalizado (4 semanas) |
| `improve-exercises` | `gemini-2.5-flash` | Melhorar descri√ß√£o e instru√ß√µes de exerc√≠cios |

---

## üìä RELAT√ìRIOS E AN√ÅLISES

| Edge Function | Modelo | Para que serve |
|--------------|--------|----------------|
| `saboteur-html-report` | `gemini-2.5-flash` | Gerar relat√≥rio de sabotadores internos em HTML |
| `google-fit-ai-analysis` | `gemini-2.5-flash` | Analisar dados do Google Fit e dar insights |
| `generate-user-biography` | `gemini-1.5-flash` | Criar biografia motivacional do usu√°rio |
| `generate-human-message` | `gemini-2.5-flash-preview` | Gerar mensagens humanizadas para notifica√ß√µes |
| `n8n-weekly-whatsapp-report` | `gemini-2.5-flash` | Relat√≥rio semanal via N8N automation |

---

## üîß UTILIT√ÅRIOS

| Edge Function | Modelo | Para que serve |
|--------------|--------|----------------|
| `activate-ai` | `gemini-2.5-flash` | Testar se conex√µes de IA est√£o funcionando |
| `vision-api` | `gemini-2.5-flash` | API gen√©rica de vis√£o computacional |

---

## ü¶æ YOLO (VPS LOCAL - Pr√©-processamento)

| Servi√ßo | Para que serve |
|---------|----------------|
| `YOLO Detection` (`45.67.221.216:8002`) | Detectar objetos em imagens ANTES de enviar para Gemini (identifica pratos, copos, alimentos) |

**Fluxo:** Imagem ‚Üí YOLO detecta objetos ‚Üí Gemini refina com contexto YOLO

---

## üìã RESUMO POR PROVEDOR

### Lovable AI Gateway (Principal)
- `google/gemini-3-flash-preview` - Chat r√°pido
- `google/gemini-2.5-flash` - Uso geral (maioria das fun√ß√µes)
- `google/gemini-2.5-flash-lite` - Tarefas simples
- `google/gemini-2.5-pro` - An√°lise de exames m√©dicos (qualidade cr√≠tica)
- `openai/gpt-5-mini` - WhatsApp (melhor compreens√£o de voz)

### Google AI Direct (Fallback)
- `gemini-1.5-flash` - Fallback r√°pido
- `gemini-1.5-pro` - Fallback premium

### OpenAI Direct (Fallback)
- `gpt-4o` - Fallback para chat complexo
- `gpt-4o-mini` - Fallback econ√¥mico

---

## üîÑ FUN√á√ïES SEM IA (Determin√≠sticas)

| Edge Function | O que faz |
|--------------|-----------|
| `sofia-deterministic` | C√°lculos nutricionais via tabela TACO |
| `generate-meal-plan-taco` | Card√°pio baseado em regras |
| `nutrition-calc` | C√°lculos de macros |
| `nutrition-calc-deterministic` | C√°lculos determin√≠sticos |
| `nutrition-daily-summary` | Agrega√ß√£o de dados |
| `confirm-food-analysis` | Confirma√ß√£o do usu√°rio |
| `rate-limiter` | Controle de requisi√ß√µes |
| `cache-manager` | Gerenciamento de cache |

---

*Total: ~40 edge functions com IA + ~10 determin√≠sticas*
