# ğŸ“¸ GUIA VISUAL - Executar MigraÃ§Ã£o no Supabase

> **Passo a passo com capturas de tela (descriÃ§Ã£o)**

---

## ğŸ¯ PASSO 1: Acessar Dashboard

### URL:
```
https://supabase.com/dashboard
```

### O que vocÃª verÃ¡:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Dashboard                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Seus Projetos:                         â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“¦ instituto-dos-sonhos        â”‚   â”‚
â”‚  â”‚  ğŸŸ¢ Active                      â”‚   â”‚
â”‚  â”‚  [Abrir Projeto]                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ‘‰ Clique em "Abrir Projeto" ou no nome do projeto**

---

## ğŸ¯ PASSO 2: Abrir SQL Editor

### Menu Lateral:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ  Home            â”‚
â”‚  ğŸ“Š Table Editor    â”‚
â”‚  ğŸ” SQL Editor  â† AQUI
â”‚  ğŸ” Authentication  â”‚
â”‚  ğŸ“¦ Storage         â”‚
â”‚  ğŸ”§ Database        â”‚
â”‚  âš™ï¸  Settings       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ‘‰ Clique em "SQL Editor"**

---

## ğŸ¯ PASSO 3: Criar Nova Query

### Tela do SQL Editor:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SQL Editor                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [+ New Query]  [Snippets â–¼]  [History]           â”‚
â”‚                                                     â”‚
â”‚  Queries recentes:                                  â”‚
â”‚  â€¢ SELECT * FROM profiles...                        â”‚
â”‚  â€¢ UPDATE user_goals...                             â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ‘‰ Clique em "+ New Query"**

---

## ğŸ¯ PASSO 4: Colar a MigraÃ§Ã£o

### Editor SQL:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Untitled Query                    [Run] [Save]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  1  -- Cole aqui o conteÃºdo do arquivo:            â”‚
â”‚  2  -- supabase/migrations/                        â”‚
â”‚  3  --   20260112400000_add_goals_gamification...  â”‚
â”‚  4                                                  â”‚
â”‚  5  -- ================================             â”‚
â”‚  6  -- MIGRAÃ‡ÃƒO SEGURA: GamificaÃ§Ã£o de Metas      â”‚
â”‚  7  -- ================================             â”‚
â”‚  8                                                  â”‚
â”‚  9  ALTER TABLE public.user_goals                  â”‚
â”‚ 10  ADD COLUMN IF NOT EXISTS streak_days...        â”‚
â”‚                                                     â”‚
â”‚  [Ãrea de ediÃ§Ã£o - Cole o SQL aqui]                â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Como colar:

1. **Abra o arquivo:**
   ```
   supabase/migrations/20260112400000_add_goals_gamification_safe.sql
   ```

2. **Selecione tudo:**
   - Windows/Linux: `Ctrl + A`
   - Mac: `Cmd + A`

3. **Copie:**
   - Windows/Linux: `Ctrl + C`
   - Mac: `Cmd + C`

4. **Cole no SQL Editor:**
   - Windows/Linux: `Ctrl + V`
   - Mac: `Cmd + V`

---

## ğŸ¯ PASSO 5: Executar

### BotÃ£o Run:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Untitled Query          [â–¶ Run] [ğŸ’¾ Save]         â”‚
â”‚                          â†‘                          â”‚
â”‚                          â””â”€ CLIQUE AQUI            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [SQL completo colado aqui]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ‘‰ Clique em "â–¶ Run" ou pressione:**
- Windows/Linux: `Ctrl + Enter`
- Mac: `Cmd + Enter`

### Aguarde (5-10 segundos):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â³ Executing query...                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ PASSO 6: Verificar Sucesso

### Resultado Esperado:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Success                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Results:                                           â”‚
â”‚                                                     â”‚
â”‚  NOTICE: MigraÃ§Ã£o de gamificaÃ§Ã£o de metas          â”‚
â”‚          concluÃ­da com sucesso!                     â”‚
â”‚                                                     â”‚
â”‚  NOTICE: Tabelas criadas:                           â”‚
â”‚          goal_achievements, goal_streaks,           â”‚
â”‚          user_goal_levels                           â”‚
â”‚                                                     â”‚
â”‚  NOTICE: Campos adicionados a user_goals:           â”‚
â”‚          streak_days, last_update_date,             â”‚
â”‚          xp_earned, level, evidence_urls,           â”‚
â”‚          participant_ids                            â”‚
â”‚                                                     â”‚
â”‚  NOTICE: FunÃ§Ãµes criadas:                           â”‚
â”‚          update_goal_streak(),                      â”‚
â”‚          calculate_xp_to_next_level(),              â”‚
â”‚          process_level_up()                         â”‚
â”‚                                                     â”‚
â”‚  Query executed successfully                        â”‚
â”‚  Rows returned: 0                                   â”‚
â”‚  Time: 8.2s                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**âœ… Se viu essas mensagens, SUCESSO!**

---

## ğŸ¯ PASSO 7: Validar (Opcional mas Recomendado)

### Criar Nova Query:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [+ New Query]  â† Clique aqui                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cole esta query de validaÃ§Ã£o:
```sql
SELECT 
  (SELECT COUNT(*) FROM information_schema.tables 
   WHERE table_name IN ('goal_achievements', 'goal_streaks', 'user_goal_levels')) as tabelas_criadas,
  (SELECT COUNT(*) FROM information_schema.columns 
   WHERE table_name = 'user_goals' 
   AND column_name IN ('streak_days', 'xp_earned', 'level')) as campos_adicionados,
  (SELECT COUNT(*) FROM information_schema.routines 
   WHERE routine_name IN ('update_goal_streak', 'process_level_up')) as funcoes_criadas;
```

### Resultado Esperado:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Success                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Results (1 row):                                   â”‚
â”‚                                                     â”‚
â”‚  tabelas_criadas    | 3                             â”‚
â”‚  campos_adicionados | 3                             â”‚
â”‚  funcoes_criadas    | 2                             â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**âœ… Se viu esses nÃºmeros, estÃ¡ PERFEITO!**

---

## ğŸ¯ PASSO 8: Verificar Tabelas (Opcional)

### Ir para Table Editor:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ  Home            â”‚
â”‚  ğŸ“Š Table Editor â† AQUI
â”‚  ğŸ” SQL Editor      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### VocÃª verÃ¡ as novas tabelas:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tables                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ user_goals (atualizada)                         â”‚
â”‚  ğŸ† goal_achievements (NOVA)                        â”‚
â”‚  ğŸ”¥ goal_streaks (NOVA)                             â”‚
â”‚  â­ user_goal_levels (NOVA)                         â”‚
â”‚  ğŸ“Š profiles                                        â”‚
â”‚  ğŸ“ challenges                                      â”‚
â”‚  ...                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… CHECKLIST VISUAL

Marque conforme avanÃ§a:

- [ ] âœ… Acessei https://supabase.com/dashboard
- [ ] âœ… Abri meu projeto
- [ ] âœ… Cliquei em "SQL Editor" no menu lateral
- [ ] âœ… Cliquei em "+ New Query"
- [ ] âœ… Copiei o arquivo `20260112400000_add_goals_gamification_safe.sql`
- [ ] âœ… Colei no editor SQL
- [ ] âœ… Cliquei em "Run" (ou Ctrl+Enter)
- [ ] âœ… Vi as mensagens de sucesso (NOTICE)
- [ ] âœ… Executei a query de validaÃ§Ã£o
- [ ] âœ… Vi os nÃºmeros corretos (3, 3, 2)
- [ ] âœ… Verifiquei as novas tabelas no Table Editor

---

## ğŸ‰ PRONTO!

Se completou todos os passos acima, a migraÃ§Ã£o foi **100% bem-sucedida!**

### PrÃ³ximos Passos:

1. **Integrar o componente React:**
   ```
   src/components/goals/ModernGoalCard.tsx
   ```

2. **Ver o preview visual:**
   ```
   Abra: PREVIEW_MINHAS_METAS_NOVO.html no navegador
   ```

3. **Ler a documentaÃ§Ã£o completa:**
   ```
   docs/ANALISE_MINHAS_METAS_COMPLETA.md
   ```

---

## ğŸ“ TROUBLESHOOTING

### âŒ Erro: "permission denied"
**SoluÃ§Ã£o:** VocÃª precisa ser admin do projeto Supabase

### âŒ Erro: "column already exists"
**SoluÃ§Ã£o:** A migraÃ§Ã£o jÃ¡ foi executada antes. EstÃ¡ tudo OK!

### âŒ Erro: "syntax error"
**SoluÃ§Ã£o:** Certifique-se de copiar TODO o conteÃºdo do arquivo SQL

### âŒ Timeout
**SoluÃ§Ã£o:** Execute novamente. Pode ser lentidÃ£o temporÃ¡ria.

---

## ğŸ†˜ ROLLBACK (Se necessÃ¡rio)

Se algo der errado, execute:

```sql
-- ROLLBACK COMPLETO
DROP TRIGGER IF EXISTS trigger_update_goal_streak ON public.user_goals;
DROP FUNCTION IF EXISTS update_goal_streak();
DROP FUNCTION IF EXISTS calculate_xp_to_next_level(integer);
DROP FUNCTION IF EXISTS process_level_up(uuid, integer);
DROP TABLE IF EXISTS public.goal_achievements CASCADE;
DROP TABLE IF EXISTS public.goal_streaks CASCADE;
DROP TABLE IF EXISTS public.user_goal_levels CASCADE;

ALTER TABLE public.user_goals
DROP COLUMN IF EXISTS streak_days,
DROP COLUMN IF EXISTS last_update_date,
DROP COLUMN IF EXISTS xp_earned,
DROP COLUMN IF EXISTS level,
DROP COLUMN IF EXISTS evidence_urls,
DROP COLUMN IF EXISTS participant_ids;
```

---

*Guia criado por Kiro AI - Janeiro 2026*  
*Siga passo a passo e terÃ¡ sucesso! ğŸš€*
